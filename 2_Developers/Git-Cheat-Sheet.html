<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Table of Contents | Open Library Docs</title>
    <meta name="description" content="A new docs experience for Open Library">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/openlibrary-docs/assets/style.EBppSvHT.css" as="style">
    <link rel="preload stylesheet" href="/openlibrary-docs/vp-icons.css" as="style">
    
    <script type="module" src="/openlibrary-docs/assets/app.CMWjYADJ.js"></script>
    <link rel="preload" href="/openlibrary-docs/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/openlibrary-docs/assets/chunks/theme.C4jjDcLP.js">
    <link rel="modulepreload" href="/openlibrary-docs/assets/chunks/framework.BRQrZDXk.js">
    <link rel="modulepreload" href="/openlibrary-docs/assets/2_Developers_Git-Cheat-Sheet.md.cexXtKHd.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/openlibrary-docs/" data-v-9f43907a><!--[--><!--]--><!----><span data-v-9f43907a>Open Library Docs</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/openlibrary-docs/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Home</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/internetarchive/openlibrary" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/internetarchive/openlibrary" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-51288d80 data-v-0009425e><div class="item" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/1_Everyone/index.html" data-v-0009425e><!--[--><h2 class="text" data-v-0009425e>1_Everyone</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/1_Everyone/Community-Call.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Community-Call</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/1_Everyone/Google-Summer-of-Code.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Google-Summer-of-Code</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/1_Everyone/Hacktoberfest.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Hacktoberfest</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/1_Everyone/Home.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Home</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/1_Everyone/Internationalization.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Internationalization</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/1_Everyone/Open-Library-Community-Call-Minutes.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Open-Library-Community-Call-Minutes</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/1_Everyone/Slack-Channels.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Slack-Channels</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed is-link has-active" data-v-51288d80 data-v-0009425e><div class="item" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/index.html" data-v-0009425e><!--[--><h2 class="text" data-v-0009425e>2_Developers</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><section class="VPSidebarItem level-1 collapsible collapsed" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>2_Frontend</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/2_Frontend/Frontend-Guide.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Frontend-Guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/2_Frontend/Using-Vue.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Using-Vue</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>3_Backend</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/3_Backend/Endpoints.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Endpoints</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/3_Backend/General.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>General</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/3_Backend/Understanding-The-Data-Model.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Understanding-The-Data-Model</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/3_Backend/Writing-Bots.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Writing-Bots</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/CONTRIBUTING.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>CONTRIBUTING</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/Git-Cheat-Sheet.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Git-Cheat-Sheet</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e>misc</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/misc/Docker.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Docker</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/misc/Loading-Production-Book-Data.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Loading-Production-Book-Data</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/misc/OUTDATED-Getting-Started.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>OUTDATED-Getting-Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/misc/Searching-data-dumps-with-grep-and-jq.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Searching-data-dumps-with-grep-and-jq</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/2_Developers/misc/Testing.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Testing</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>3_Designers</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/3_Designers/Design-Pattern-Library.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Design-Pattern-Library</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>4_Librarians</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/4_Librarians/Creating-Community-Lists.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Creating-Community-Lists</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/4_Librarians/Guide-to-Identifiers.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Guide-to-Identifiers</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/4_Librarians/Library-Metadata-Standards.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Library-Metadata-Standards</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/4_Librarians/Mangled-MARC.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Mangled-MARC</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>5_Projects</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/5_Projects/Canonical-Books-Page.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Canonical-Books-Page</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/5_Projects/Developing-the-Reading-Log.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Developing-the-Reading-Log</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/5_Projects/Documentation.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Documentation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/5_Projects/Lead:-Community-Coordinator.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Lead:-Community-Coordinator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/5_Projects/Lead:-Community-Librarian.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Lead:-Community-Librarian</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/5_Projects/Library-Community-Congress-2019.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Library-Community-Congress-2019</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/5_Projects/Orphaned-Editions-Planning.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Orphaned-Editions-Planning</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/5_Projects/Wikidata-Integration.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Wikidata-Integration</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-51288d80 data-v-0009425e><div class="item" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/index.html" data-v-0009425e><!--[--><h2 class="text" data-v-0009425e>6_Advanced</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Anti-Spam-Tools.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Anti-Spam-Tools</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Component-Library.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Component-Library</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Creating-and-Logging-in-as-a-new-user-on-your-local-client.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Creating-and-Logging-in-as-a-new-user-on-your-local-client</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Debugging-and-Performance-Profiling.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Debugging-and-Performance-Profiling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Deployment-Guide.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Deployment-Guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Deployment-Scratchpad.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Deployment-Scratchpad</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Developer&#39;s-Guide-to-Data-Importing.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Developer's-Guide-to-Data-Importing</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Disaster-History-Log.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Disaster-History-Log</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Disaster-Recovery-&amp;-Immediate-Response.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Disaster-Recovery-&-Immediate-Response</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Feature-Flagging.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Feature-Flagging</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Generating-Data-Dumps.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Generating-Data-Dumps</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/HOWTO:-Open-Library-Project-Management.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>HOWTO:-Open-Library-Project-Management</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Monitoring.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Monitoring</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Podman-(docker-alternative).html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Podman-(docker-alternative)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Processing-ONIX-Feeds.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Processing-ONIX-Feeds</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Production-Service-Architecture.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Production-Service-Architecture</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Production-Service-Architecture_old.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Production-Service-Architecture_old</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Provisioning-Guide.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Provisioning-Guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Sitemap-Generation.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Sitemap-Generation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Solr.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Solr</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Using-Cache.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Using-Cache</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/Using-the-API-with-Csharp.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Using-the-API-with-Csharp</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/6_Advanced/archive.org-%E2%86%94-Open-Library-synchronisation.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>archive.org-↔-Open-Library-synchronisation</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><!----><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/Coding-Recipes.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Coding-Recipes</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/Developer&#39;s-Starter-Guide.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Developer's-Starter-Guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/Fellowships.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Fellowships</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/History.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>History</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/Kubernetes.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Kubernetes</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/openlibrary-docs/The-Lifecycle-of-a-Network-Request.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>The-Lifecycle-of-a-Network-Request</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _openlibrary-docs_2_Developers_Git-Cheat-Sheet" data-v-e6f2a212><div><h1 id="table-of-contents" tabindex="-1">Table of Contents <a class="header-anchor" href="#table-of-contents" aria-label="Permalink to &quot;Table of Contents&quot;">​</a></h1><ul><li><a href="#forking-and-cloning-the-open-library-repository">Forking and Cloning the Open Library Repository</a></li><li><a href="#working-on-your-branch">Working on Your Branch</a></li><li><a href="#making-changes-and-creating-a-pull-request">Making Changes and Creating a Pull Request</a></li><li><a href="#updating-your-pull-request">Updating Your Pull Request</a></li><li><a href="#troubleshooting-your-pull-request">Troubleshooting Your Pull Request</a></li><li><a href="#commit-history-manipulation">Commit History Manipulation</a></li><li><a href="#pre-commit-and-the-github-ci">Pre-commit and the GitHub CI</a></li></ul><h2 id="forking-and-cloning-the-open-library-repository" tabindex="-1">Forking and Cloning the Open Library Repository <a class="header-anchor" href="#forking-and-cloning-the-open-library-repository" aria-label="Permalink to &quot;Forking and Cloning the Open Library Repository&quot;">​</a></h2><h3 id="fork-the-open-library-repository" tabindex="-1">Fork the Open Library repository <a class="header-anchor" href="#fork-the-open-library-repository" aria-label="Permalink to &quot;Fork the Open Library repository&quot;">​</a></h3><p>Fork the Open Library repository using the GitHub UI by logging in to GitHub, going to <a href="https://github.com/internetarchive/openlibrary" target="_blank" rel="noreferrer">https://github.com/internetarchive/openlibrary</a> and clicking the Fork button in the upper right corner: <img src="https://archive.org/download/screenshot20191211at11.12.56/fork.jpg" alt="GitHub Fork"></p><h3 id="clone-the-forked-repository-on-to-your-local-computer" tabindex="-1">Clone the forked repository on to your local computer <a class="header-anchor" href="#clone-the-forked-repository-on-to-your-local-computer" aria-label="Permalink to &quot;Clone the forked repository on to your local computer&quot;">​</a></h3><p>This creates a local copy of your own fork of the Open Library repository, in a directory called <em>openlibrary</em>. Your fork on the GitHub servers is a remote called <em>origin</em>. By default, you are looking at the <em>master</em> branch.</p><p>Make sure you <code>git clone</code> openlibrary using <code>ssh</code> instead of <code>https</code> as git submodules (e.g. <code>infogami</code> and <code>acs</code>) may not fetch correctly otherwise.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git@github.com:USERNAME/openlibrary.git</span></span></code></pre></div><h4 id="permission-denied-while-cloning" tabindex="-1">Permission denied while cloning <a class="header-anchor" href="#permission-denied-while-cloning" aria-label="Permalink to &quot;Permission denied while cloning&quot;">​</a></h4><p>If you have not added your public SSH key to GitHub you may see:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git@github.com:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Permission</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> denied</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (publickey).</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fatal:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Could</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> read</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repository.</span></span></code></pre></div><p>To fix this, first <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" target="_blank" rel="noreferrer">generate a new SSH key</a> if you have not already done so, and then <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account" target="_blank" rel="noreferrer">add the SSH key to your GitHub account</a>.</p><h4 id="modifying-a-repository-wrongly-cloned-with-https-or-one-that-is-missing-the-infogami-module" tabindex="-1">Modifying a repository wrongly cloned with <code>https</code> (or one that is missing the infogami module) <a class="header-anchor" href="#modifying-a-repository-wrongly-cloned-with-https-or-one-that-is-missing-the-infogami-module" aria-label="Permalink to &quot;Modifying a repository wrongly cloned with `https` (or one that is missing the infogami module)&quot;">​</a></h4><p>You can modify an existing openlibrary repository that was inadvertently cloned with <code>https</code> by running:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git@github.com:USERNAME/openlibrary.git</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span></code></pre></div><h4 id="fix-line-endings-symlinks-and-git-submodules-only-for-windows-users-not-using-a-linux-vm" tabindex="-1">Fix line endings, symlinks and git submodules (only for Windows users not using a Linux VM) <a class="header-anchor" href="#fix-line-endings-symlinks-and-git-submodules-only-for-windows-users-not-using-a-linux-vm" aria-label="Permalink to &quot;Fix line endings, symlinks and git submodules (only for Windows users not using a Linux VM)&quot;">​</a></h4><p>Here, the project files need LF line endings because they are used in a Linux Docker container, even if run from Windows. Additionally, symlinks don&#39;t clone properly, and this creates issues for the git submodules, among other things.</p><p>For more on git and line endings, see <a href="https://docs.github.com/en/get-started/getting-started-with-git/configuring-git-to-handle-line-endings" target="_blank" rel="noreferrer">Configuring Git to handle line endings</a>.</p><p><strong>Note: if you get permission issues while executing these commands please run git the bash shell as an Administrator.</strong></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get in the project root directory</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openlibrary</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Configure Git to keep LF line endings on checkout even on Windows.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> core.autocrlf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Enable symlinks</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> core.symlinks</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Build submodules</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> submodule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Stage indexed files for removal so git reset updates them</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cached</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Don&#39;t forget the &quot;.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Reset the repo (removes any changes you&#39;ve made to files and is likely to give an error if not administrator)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --hard</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # You will almost certainly need to use git-bash as administrator for this.</span></span></code></pre></div><h3 id="add-upstream-repo-to-list-of-remotes" tabindex="-1">Add &#39;upstream&#39; repo to list of remotes <a class="header-anchor" href="#add-upstream-repo-to-list-of-remotes" aria-label="Permalink to &quot;Add &#39;upstream&#39; repo to list of remotes&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openlibrary</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upstream</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/internetarchive/openlibrary.git</span></span></code></pre></div><h3 id="verify-the-new-remote-named-upstream" tabindex="-1">Verify the new remote named &#39;upstream&#39; <a class="header-anchor" href="#verify-the-new-remote-named-upstream" aria-label="Permalink to &quot;Verify the new remote named &#39;upstream&#39;&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  git@github.com:USERNAME/openlibrary.git</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (fetch)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  git@github.com:USERNAME/openlibrary.git</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (push)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">upstream</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        https://github.com/internetarchive/openlibrary.git</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (fetch)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">upstream</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        https://github.com/internetarchive/openlibrary.git</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (push)</span></span></code></pre></div><p>Note that <code>origin</code> is <code>git@</code>. If it is not, see <a href="#forking-and-cloning-the-open-library-repository">Forking and Cloning the Open Library Repository</a>.</p><h2 id="working-on-your-branch" tabindex="-1">Working on Your Branch <a class="header-anchor" href="#working-on-your-branch" aria-label="Permalink to &quot;Working on Your Branch&quot;">​</a></h2><p>Because new commits are frequently merged into the Open Library repository, it&#39;s important to make sure that the branch you&#39;re working on is up to date with the upstream <code>master</code> version.</p><p>Before creating a new branch and <strong>each time</strong> you start work on an existing branch, you should run the following commands to make sure your master branch is up to date:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git switch master</span></span>
<span class="line"><span>git pull --ff-only upstream master</span></span>
<span class="line"><span>git push origin master</span></span></code></pre></div><p><strong>Note:</strong> When running the <code>pull --ff-only</code>, you may see the error <code>fatal: Not possible to fast-forward</code>. If so, see <a href="#out-of-sync-branches">Out-of-Sync Branches</a> for more instructions re: getting your branch up to date.</p><p>You can then create a new branch for your issue:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git switch -c 1234/fix/fix-the-thing</span></span></code></pre></div><p>Or, if you are returning to work on a previously created branch, rebase* with master:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git switch existing-branch-name</span></span>
<span class="line"><span>git rebase master</span></span></code></pre></div><p>*<strong>Note:</strong> Rebasing is the equivalent of &quot;lifting&quot; all the commits in your branch, and placing them on top of the latest master. It effectively changes the <em>base</em> of your branch/commits. If you encounter any errors in the rebase process, see the <a href="#troubleshooting-your-pull-request">troubleshooting guide</a>.</p><p>You can then confirm that everything is up to date by running <code>git status</code> and/or visiting your remote master branch at <code>github.com/your-username/openlibrary</code>, where you should see the following: <img width="777" alt="OL_Git_UpdatedMaster" src="https://github.com/internetarchive/openlibrary/assets/79802377/1c47c7dd-d56e-4098-8924-8689bd91b8a1"></p><p>If everything looks good, you can continue following the steps in <a href="#making-changes-and-creating-a-pull-request">Making Changes and Creating a Pull Request</a> to commit, test and submit your changes.</p><p>If not, read on!</p><h3 id="out-of-sync-branches" tabindex="-1">Out-of-Sync Branches <a class="header-anchor" href="#out-of-sync-branches" aria-label="Permalink to &quot;Out-of-Sync Branches&quot;">​</a></h3><p>Your master or working branch may get out-of-sync. In general, <strong>do not use VSCODE or GITHUB MERGE</strong> to resolve merge conflicts. Here are some commands to run for common out-of-sync situations:</p><p>(Note: You check the status of your branch by running <code>git status</code> or going to <code>github.com/your-username/openlibrary</code>)</p><p><strong>Master is behind upstream master</strong><img src="https://github.com/internetarchive/openlibrary/assets/79802377/80fe990e-72be-4eff-beb2-b4ad7f888378" alt="OL_Git_UnsyncedMaster"></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git switch master</span></span>
<span class="line"><span>git pull upstream master</span></span>
<span class="line"><span>git push origin master</span></span></code></pre></div><p><strong>Master is behind and ahead of upstream master</strong><img src="https://github.com/internetarchive/openlibrary/assets/79802377/a28aa6f0-2136-4bad-8564-bea9b893c44d" alt="OL_Git_UnsyncedMaster2"></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git switch master</span></span>
<span class="line"><span>git reset --hard HEAD~[the number of commits you are ahead by]</span></span>
<span class="line"><span>git pull --ff-only upstream master</span></span>
<span class="line"><span>git push -f origin master</span></span></code></pre></div><p><strong>Note:</strong> A &quot;hard&quot; <code>reset</code> will permanently undo your changes, so make sure you&#39;re on the master branch before resetting. It&#39;s always safe to hard reset your master branch because it is supposed to be identical to the upstream version.</p><p>This means that if you&#39;ve accidentally committed something to your master branch, you can easily <code>reset</code> as many commits as you&#39;d like -- often <code>git reset --hard HEAD~100</code> is a good way to get a clean slate -- then just <code>pull</code> in the upstream version to remain up to date.</p><p><strong>Working Branch is behind upstream master (it will always be ahead if you&#39;ve made changes):</strong><img src="https://github.com/internetarchive/openlibrary/assets/79802377/2074f643-1bf0-45aa-ab10-cb68e9763e78" alt="OL_Git_UnsyncedBranch"></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git switch master</span></span>
<span class="line"><span>git pull --ff-only upstream master</span></span>
<span class="line"><span>git push origin master</span></span>
<span class="line"><span>git switch your-branch-name</span></span>
<span class="line"><span>git rebase master</span></span></code></pre></div><p>If rebasing your branch fails or provokes merge conflicts, see <a href="#troubleshooting-your-pull-request">Troubleshooting Your Pull Request</a>.</p><p>When you&#39;re done working and try to push your branch with <code>git push origin HEAD</code>, you may encounter the following error:</p><img width="571" alt="OL_Failed_Push" src="https://github.com/internetarchive/openlibrary/assets/140550988/8eaa623b-eff9-4d81-8099-e40bfea732de"><p>This usually means that, as a result of the rebase, you&#39;ll need to force push* your updates:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git push -f origin HEAD</span></span></code></pre></div><p>*<strong>Note:</strong> While regular pushing just adds new commits to the remote branch, force pushing <em>replaces</em> the commits on the remote branch with the commits on your local branch, effectively re-writing the remote commit history. Sometimes when you perform a rebase, you will have to force push to your branch.</p><p>If so, be sure to <strong>force push with care:</strong> You should <em>only</em> force push if working on one of your own branches. If working on a branch which other people are also pushing to, force pushing is dangerous because it can override others&#39; work. In that case, use <code>--force-with-lease</code>; this will force push <em>only</em> if someone else hasn&#39;t made any changes to the branch.</p><p>If none of the above solved the issue, you can consult a staff member or the issue&#39;s lead, and/or see <a href="#troubleshooting-your-pull-request">Troubleshooting your Pull Request</a>.</p><h2 id="making-changes-and-creating-a-pull-request" tabindex="-1">Making Changes and Creating a Pull Request <a class="header-anchor" href="#making-changes-and-creating-a-pull-request" aria-label="Permalink to &quot;Making Changes and Creating a Pull Request&quot;">​</a></h2><p><strong>1. Make sure master is up-to-date:</strong></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> switch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> master</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ff-only</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upstream</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> master</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> master</span></span></code></pre></div><p>For troubleshooting or to learn more, see <a href="#working-on-your-branch">working on your branch</a>.</p><p><strong>2. <a href="https://github.com/internetarchive/openlibrary/blob/master/CONTRIBUTING.md#development-practices" target="_blank" rel="noreferrer">Create a new branch for the feature or issue you plan to work on</a> and switch to it:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git switch -c 1234/fix/fix-the-thing</span></span></code></pre></div><p>Specifying <code>-c</code> creates a new branch, and <code>switch</code> switches to it. The typical branch name format is <code>[issue number]/[fix/feature/hotfix]/[short-issue-description]</code></p><p><strong>3. Make changes/commit:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git add the-file.html</span></span>
<span class="line"><span>git commit -m &quot;Fixed the thing&quot;</span></span></code></pre></div><p>A commit message should answer three primary questions;</p><ul><li>Why is this change necessary?</li><li>How does this commit address the issue?</li><li>What effects does this change have?</li></ul><p><strong>4. Test your changes:</strong></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> home</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span></code></pre></div><p>When you submit your pull request, the <a href="#pre-commit-and-the-github-ci">GitHub CI server</a> will automatically run a few more tests and formatting checks.</p><p>If you&#39;d like, you can run these checks before you submit by <a href="#running-pre-commit-locally-recommended">installing <code>pre-commit</code> locally</a>, or run a <a href="https://github.com/internetarchive/openlibrary/wiki/Testing#linting" target="_blank" rel="noreferrer">one-off formatting check</a>.</p><p><strong>5. Push the branch:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git push origin HEAD</span></span></code></pre></div><p><strong>Note:</strong> <code>HEAD</code> refers to your current branch, so make sure you&#39;re on the right branch.</p><p><strong>6. Submit your pull request:</strong></p><p>Go to <a href="https://github.com/internetarchive/openlibrary/pulls" target="_blank" rel="noreferrer">github.com/internetarchive/openlibrary/pulls</a>; find the message at the top re: your branch and click <code>Compare &amp; pull request</code>. <img src="https://github.com/internetarchive/openlibrary/assets/79802377/d58c3d92-e281-4775-9eab-084490887d11" alt="OL_Git_PR"></p><p>Confirm that the changes in <code>Files Changed</code> match the changes you have made on your working branch and intend for this PR. If not, see <a href="#troubleshooting-your-pull-request">Troubleshooting Your Pull Request</a>.</p><p>If everything looks right, you can write out an explanation of your changes using the provided template and submit. Your code is now ready for review!</p><p><strong>Reminder:</strong> Any time you return to your branch to make changes, be sure to follow steps in <a href="#working-on-your-branch">Working on Your Branch</a> to make sure your branch stays up to date.</p><h2 id="updating-your-pull-request" tabindex="-1">Updating your Pull Request <a class="header-anchor" href="#updating-your-pull-request" aria-label="Permalink to &quot;Updating your Pull Request&quot;">​</a></h2><p>Pull requests often receive feedback; to make <a href="https://github.com/internetarchive/openlibrary/blob/master/CONTRIBUTING.md#submitting-pull-requests" target="_blank" rel="noreferrer">requested changes</a> to your existing pull request:</p><p><strong>1. Make sure your branch is up to date with master:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git switch master</span></span>
<span class="line"><span>git pull --ff-only upstream master</span></span>
<span class="line"><span>git push origin master</span></span></code></pre></div><p><strong>2. Switch to your branch:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git switch your-branch-name</span></span>
<span class="line"><span>git rebase master</span></span></code></pre></div><p>For more on rebasing, see <a href="#working-on-your-branch">Working on Your Branch</a>.</p><p><strong>3. Make your changes and commit (same as step 3 above)</strong></p><p><strong>4. Push your changes up:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git push origin HEAD</span></span></code></pre></div><p><strong>Note:</strong> When trying to push you may see a warning like the following:</p><img width="571" alt="OL_Failed_Push" src="https://github.com/internetarchive/openlibrary/assets/140550988/4f546ed0-02ed-4f34-8b98-91361e660768"><p>This usually means you need to <em>force-push</em> your changes as a result of the rebase:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git push -f origin HEAD</span></span></code></pre></div><p>To learn more, see <a href="#working-on-your-branch">Working on Your Branch</a>.</p><h2 id="troubleshooting-your-pull-request" tabindex="-1">Troubleshooting Your Pull Request <a class="header-anchor" href="#troubleshooting-your-pull-request" aria-label="Permalink to &quot;Troubleshooting Your Pull Request&quot;">​</a></h2><p><strong>Note:</strong> If you encounter any errors you don&#39;t understand and/or don&#39;t want to try working through this troubleshooting guide yourself, feel free to reach out to the issue&#39;s lead, who can best case guide you to the correct resources or worst case just make any necessary fixes on your remote branch for you.</p><p><strong>Tips for what to do in common situations, such as:</strong></p><ul><li><a href="#rebase-fails-with-merge-conflict-error">Rebase Fails with Merge Conflict Error</a></li><li><a href="#pr-includes-unrelated-commits">PR Includes Unrelated Commits</a></li><li><a href="#commits-include-unrelated-changes">Commits Include Unrelated Changes</a></li><li><a href="#the-github-ci-server">Failing an Automated GitHub CI Check</a></li><li><a href="#running-pre-commit-locally-recommended">Failing a Local Pre-Commit Check</a></li><li><a href="#failing-the-generate-pot-check">Failing the <code>Generate POT</code> Check</a></li><li><a href="#could-not-read-from-remote-repository">Could Not Read From Remote Repository</a></li><li><a href="#manual-merge-conflict-resolution">Manual Merge Conflict Resolution</a></li></ul><h3 id="rebase-fails-with-merge-conflict-error" tabindex="-1">Rebase Fails With Merge Conflict Error <a class="header-anchor" href="#rebase-fails-with-merge-conflict-error" aria-label="Permalink to &quot;Rebase Fails With Merge Conflict Error&quot;">​</a></h3><p>Sometimes when you try to <code>rebase</code> your branch after <a href="#working-on-your-branch">updating your master branch</a>, you&#39;ll get an error message like this:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Auto-merging openlibrary/templates/about/team.json</span></span>
<span class="line"><span>CONFLICT (content): Merge conflict in openlibrary/templates/about/team.json</span></span>
<span class="line"><span>error: could not apply 447122b8d... Switch out personal URL for team page</span></span>
<span class="line"><span>hint: Resolve all conflicts manually, mark them as resolved with</span></span>
<span class="line"><span>hint: &quot;git add/rm &lt;conflicted_files&gt;&quot;, then run &quot;git rebase --continue&quot;.</span></span></code></pre></div><p>There is a fairly simple way to resolve a conflict like this in VSCode&#39;s editor, <strong>but</strong> you first want to make 100% sure that you&#39;re dealing with an actual <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/addressing-merge-conflicts/about-merge-conflicts" target="_blank" rel="noreferrer">merge conflict</a>, as this error can sometimes happen as a result of accidental commits on one of your branches or another out-of-date branch issue.</p><p>If this is the case, using the merge conflict resolution tools in VSCode or GitHub will only create more problems, so before starting a manual resolution, you&#39;ll want to run:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git rebase --abort</span></span></code></pre></div><p>And then check in with your issue&#39;s lead to determine what steps to follow and/ or double-check to ensure you&#39;re dealing with an actual merge conflict by:</p><ol><li>Following the steps in <a href="#working-on-your-branch">Working on Your Branch</a> to confirm that your master is up to date and not &quot;ahead&quot; by any commits before trying to rebase again.</li><li>Ensuring that your PR does not include any unrelated commits, by checking the &quot;Outgoing&quot; commits in the VSCode Source Control tab and/or the &quot;Commits&quot; tab on your PR on GitHub. If you find any, follow the steps in <a href="#pr-includes-unrelated-commits">PR Includes Unrelated Commits</a>.</li><li>Ensuring that your commits don&#39;t include any unrelated changes, by checking the &quot;Outgoing&quot; changes in the VSCode Source Control tab and/or the &quot;Files changed&quot; tab on your PR on GitHub. If you find any, follow the steps in <a href="#commits-include-unrelated-changes">Commits Include Unrelated Changes</a>.</li><li>Ensuring that you aren&#39;t getting this conflict because the <code>pre-commit</code> CI made some commits on your behalf. You&#39;ll see these in the &quot;Commits&quot; section on GitHub, and you&#39;ll want to pull them into your branch with <code>git pull upstream name-of-your-branch</code> before trying to rebase. After this, you&#39;ll need to run a <code>git push -f origin HEAD</code> to keep everything up to date.</li></ol><p>If you&#39;ve tried each of the above steps, and you&#39;re still getting the merge conflict error, you can now either contact your issue&#39;s lead for help moving forward, or begin to <a href="#manual-merge-conflict-resolution">resolve it manually</a>.</p><h3 id="pr-includes-unrelated-commits" tabindex="-1">PR Includes Unrelated Commits <a class="header-anchor" href="#pr-includes-unrelated-commits" aria-label="Permalink to &quot;PR Includes Unrelated Commits&quot;">​</a></h3><p>Sometimes if you have a look at the outgoing changes in the VSCode Source Control tab or the &quot;Commits&quot; in your submitted PR, you&#39;ll notice that there are other changes included along with yours that either a) you made but didn&#39;t intend to include in this PR, or b) were made by other people.</p><p>The most common reason this would happen is that you pulled in the upstream changes but forgot to push to your remote branch as well. So before proceeding, you&#39;ll want to confirm that you&#39;ve pushed everything up:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git switch master</span></span>
<span class="line"><span>git pull --ff-only upstream master</span></span>
<span class="line"><span>git push origin master</span></span>
<span class="line"><span>git switch your-branch</span></span>
<span class="line"><span>git push -f origin HEAD</span></span></code></pre></div><p>If you can see that the extra commits are now gone, you&#39;re good to go. If not, this means that you&#39;ll need to manually remove the unneeded commits from your branch, like so:</p><ol><li>Switch to the correct branch and run the following command. If using VSCode, it&#39;s recommended that you do this in the <a href="https://code.visualstudio.com/docs/terminal/basics" target="_blank" rel="noreferrer">built-in terminal</a> to ensure that the next few steps also happen in VSCode.</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git rebase -i master</span></span></code></pre></div><p>This will open a text editor that you can use to select which commits you actually want included in your PR, i.e.:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pick eb8ab51 [Your commit message]</span></span>
<span class="line"><span>pick a18d382 [Someone else&#39;s commit you don&#39;t want]</span></span>
<span class="line"><span>pick 76b9883 [Your commit message]</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Rebase ef7d551..23961be onto ef7d551 (7 commands)</span></span></code></pre></div><p>To remove an unwanted commit, simply switch the text from <code>pick</code> to <code>drop</code> in the text editor and close the window. Once this is done, you can double-check that the unwanted commits are now gone, and force-push your changes:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git push -f origin HEAD</span></span></code></pre></div><p><strong>Note:</strong> If the text editor opens in something other than VSCode and you&#39;re unsure how to close it, and/or you&#39;d like to try some more advanced commit manipulation methods, see <a href="#commit-history-manipulation">Commit History Manipulation</a> to learn more.</p><h3 id="commits-include-unrelated-changes" tabindex="-1">Commits Include Unrelated Changes <a class="header-anchor" href="#commits-include-unrelated-changes" aria-label="Permalink to &quot;Commits Include Unrelated Changes&quot;">​</a></h3><p>Sometimes if you have a look at the outgoing changes in the VSCode Source Control tab or the &quot;Files changed&quot; in your submitted PR, you&#39;ll notice that there are a number of changes made and/or files changed that you didn&#39;t intend to include in the PR.</p><p>If you look at the commit history (&quot;Commits&quot; tab on GitHub) and can confirm that those changes each come from someone else&#39;s commit or a separate commit of yours that was accidentally included, you can follow the steps in <a href="#pr-includes-unrelated-commits">PR Includes Unrelated Commits</a>.</p><p>But if you can see that the unrelated changes are actually included in commits you do want to keep, you can do the following:</p><ol><li>Ensure your master branch is up to date:</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git switch master</span></span>
<span class="line"><span>git pull --ff-only upstream master</span></span>
<span class="line"><span>git push origin master</span></span>
<span class="line"><span>git switch your-branch</span></span></code></pre></div><ol start="2"><li>&quot;Soft&quot; reset as many commits as you need, i.e.:</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git reset --soft HEAD~[number of commits to undo]</span></span></code></pre></div><p>This will effectively undo your commit (or commits) and return the changes to staging. You can then undo any changes you don&#39;t want included, i.e.:</p><p>In the VSCode Source Control tab:</p><ul><li>Hover over the changed you file you want to undo changes to</li><li>Hit the minus sign to remove it from staging</li><li>Hit the reverse symbol to undo the changes</li></ul><p>Or, in the terminal:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Remove unwanted file from staging -- or use a . instead of filename to unstage all</span></span>
<span class="line"><span>git restore --staged path/to/your/file</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Undo changes to selected file</span></span>
<span class="line"><span>git checkout -- path/to/your/file</span></span></code></pre></div><p>You can then re-commit your desired changes, and push your changes back up:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Add any files you want to commit back to staging if needed</span></span>
<span class="line"><span>git add file-to-include</span></span>
<span class="line"><span>git commit -m &quot;Your original commit message&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Force push to overwrite the remote version</span></span>
<span class="line"><span>git push -f origin HEAD</span></span></code></pre></div><h3 id="failing-the-generate-pot-check" tabindex="-1">Failing the <code>Generate POT</code> check <a class="header-anchor" href="#failing-the-generate-pot-check" aria-label="Permalink to &quot;Failing the `Generate POT` check&quot;">​</a></h3><p>If your commit involves adding, removing or altering text that will be visible to the user and is properly internationalized, an update of the translation template file will be automatically bundled in with your changes via <code>pre-commit</code>.</p><p>To learn more, see <a href="#pre-commit-and-the-github-ci">Pre-commit and the GitHub CI</a>.</p><p><strong>What this means:</strong></p><p>If you&#39;re running <code>pre-commit</code> locally:</p><ul><li>Your code will &quot;fail&quot; a test called <code>Generate POT</code>, give you the error message <code>Files were modified by this hook</code>, and add <code>messages.pot</code> changes to your git unstaged changes.</li><li>All you need to do to &quot;pass&quot; the test is add the <code>messages.pot</code> file to staging and redo your commit; the <code>Generate POT</code> test should now pass, and your changes will be immediately available to translators once your branch is merged.</li></ul><p>If you&#39;re not running <code>pre-commit</code> locally:</p><ul><li>Your code will &quot;fail&quot; the <code>pre-commit</code> check run by the GitHub Continuous Integration (CI) server</li><li>The CI will then push a new commit to your remote branch that contains the necessary <code>messages.pot</code> updates and now passes the <code>pre-commit</code> check</li><li>You don&#39;t need to do anything else after this, but if you want to make and push further changes to the PR, it would be wise to first run a <code>git pull origin HEAD</code> to pull in the new <code>messages.pot</code> changes and avoid conflicts in future pushes</li></ul><h3 id="could-not-read-from-remote-repository" tabindex="-1">Could Not Read from Remote Repository <a class="header-anchor" href="#could-not-read-from-remote-repository" aria-label="Permalink to &quot;Could Not Read from Remote Repository&quot;">​</a></h3><p>It may happen that when you try to pull in the <code>upstream</code> version of the repository, you&#39;ll get the following error:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>fatal: &#39;upstream&#39; does not appear to be a git repository</span></span>
<span class="line"><span>fatal: Could not read from remote repository</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Please make sure you have the correct access rights and the repository exists.</span></span></code></pre></div><p>This just means that your branch has accidentally gotten disconnected from the OL master branch. All you need to do to fix it is <a href="#add-upstream-repo-to-list-of-remotes">add <code>upstream</code> repo to list of remotes</a> and <a href="#verify-the-new-remote-named-upstream">double-check that it worked</a>.</p><p>You can then safely try pulling again to keep everything up to date.</p><h3 id="manual-merge-conflict-resolution" tabindex="-1">Manual Merge Conflict Resolution <a class="header-anchor" href="#manual-merge-conflict-resolution" aria-label="Permalink to &quot;Manual Merge Conflict Resolution&quot;">​</a></h3><p><strong>Note:</strong> Manual merge conflict resolution can get a little tricky, so if at any time you want to stop and ask for input from your issue&#39;s lead, you can simply run <code>git rebase --abort</code> to return everything to its pre-rebase state. The lead will also be able to edit your branch for you on GitHub to resolve the conflict if necessary.</p><p>A <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/addressing-merge-conflicts/about-merge-conflicts" target="_blank" rel="noreferrer">merge conflict</a> happens when your changes conflict with other changes that have just been added to the repository.</p><p>For instance if you changed:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;div&gt;Hello world!&lt;/div&gt;</span></span></code></pre></div><p>to</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;p&gt;Hello world!&lt;/p&gt;</span></span></code></pre></div><p>And then you pulled in someone else&#39;s change from <code>upstream</code> that had for instance changed <code>Hello world!</code> to <code>Hi world!</code>, you would be faced with a merge conflict, because git would not know whether to make the line <code>&lt;p&gt;Hi world!&lt;/p&gt;</code> (both changes combined) or treat your version (<code>&lt;p&gt;Hello world!&lt;/p&gt;</code>) or their version (<code>&lt;div&gt;Hi World!&lt;/div&gt;</code>) as authoritative.</p><p>Similarly, if someone else had made conflicting changes but you hadn&#39;t rebased to include them before submitting your PR, GitHub would add a warning to the PR that your branch could not be merged until conflicts were resolved.</p><p><strong>Note:</strong> You&#39;ll only want to do this if you&#39;re 100% sure you&#39;re dealing with a real merge conflict, i.e. you can see a recent commit to the codebase that would conflict with one of your commits. To double-check and confirm you&#39;ve got a true merge conflict, see <a href="#rebase-fails-with-merge-conflict-error">Rebase Fails with Merge Conflict Error</a>.</p><p>Once you&#39;ve ensured you do have a merge conflict, you can start the <code>rebase</code> again in VSCode by switching to your branch and running <code>git rebase master</code> and use its built-in merge editor to resolve the conflict(s):</p><p><img src="https://github.com/internetarchive/openlibrary/assets/140550988/a9a6a5fa-f850-43c3-819e-b9014031012a" alt="Merge Conflict Editor"></p><p>Conflicting changes will be highlighted, and you&#39;ll have three main options:</p><ol><li>&quot;Accept Current Change&quot; - Line becomes <code>&lt;p&gt;Hello world!&lt;/p&gt;</code>, your commit now overwrites theirs, and includes changing &quot;Hi world!&quot; back to &quot;Hello world!&quot;</li><li>&quot;Accept Incoming&quot; - Line becomes <code>&lt;div&gt;Hi world!&lt;/div&gt;</code>, you undo all your own changes to the line and keep it as they have it</li><li>Custom/Combination --</li></ol><ul><li>To use a combination of the two changes, i.e. <code>&lt;p&gt;Hi world!&lt;/p&gt;</code>, select &quot;Resolve in Merge Editor&quot; which will open this view: <img src="https://github.com/internetarchive/openlibrary/assets/140550988/b04f8f34-dfd3-4c7d-abf6-bd82405558df" alt="Full Merge Editor"></li><li>Either select &quot;Accept Combination&quot; or edit the result text directly to match the desired combination</li><li>Select &quot;Complete Merge&quot;</li><li>You&#39;ll see your resulting change ready to go in the source control tab, with your previous commit message already filled in, and you can just hit &quot;Continue&quot; to re-commit and finish up</li></ul><p>Once you&#39;re done rebasing, you&#39;ll want to force-push your changes up using:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git push -f origin HEAD</span></span></code></pre></div><p>And then congratulate yourself on making it through a merge conflict resolution!</p><h2 id="commit-history-manipulation" tabindex="-1">Commit History Manipulation <a class="header-anchor" href="#commit-history-manipulation" aria-label="Permalink to &quot;Commit History Manipulation&quot;">​</a></h2><p><strong>WARNING:</strong> You can cause yourself some headaches with this feature! But it&#39;s easily one of the most powerful things about using <code>git</code>, so it&#39;s worth learning 😃</p><p>Sometimes you&#39;ll want to rearrange/reword/combine commits to keep the history neat. To do this, on your branch, run:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> master</span></span></code></pre></div><table tabindex="0"><thead><tr><th>Info</th></tr></thead><tbody><tr><td>The <code>-i</code> is for interactive. The command is also specified often as something like <code>git rebase -i HEAD~2</code>. <code>HEAD</code> refers to the current, latest commit in your branch; <code>~2</code> goes back 2 in the history, so you&#39;ll be manipulating the last 2 commits. <code>git rebase -i master</code> lets you manipulate all the commits on your branch.</td></tr></tbody></table><table tabindex="0"><thead><tr><th>Info</th></tr></thead><tbody><tr><td>By default, <code>git</code> will open up an editor in your terminal (likely <code>vim</code>). If you would rather use VS Code, run <code>git config --global core.editor &quot;code&quot;</code> once, and then <code>git</code> will always use VS Code when prompting for a rebase, or a commit message.</td></tr><tr><td>If you happen to find yourself stuck in <code>vim</code> and don&#39;t know how to get out, press <code>ggdG:wq</code> (in order: <code>g</code> for &quot;go to&quot;, <code>g</code> for &quot;top of file&quot;, <code>d</code> for delete, <code>G</code> for &quot;to bottom of file&quot;. So <code>ggdG</code> is for &quot;go to the top of the file, and delete everything&quot;. This is how you cancel <code>git rebase -i</code>. Then: <code>:</code> for &quot;enter command-line mode&quot;, <code>w</code> for &quot;save&quot;, <code>q</code> for &quot;quit&quot;. So <code>wq</code> is &quot;save and quit&quot;. If you&#39;re interested in learning more about <code>vim</code>, see <a href="https://vim.fandom.com/wiki/Tutorial" target="_blank" rel="noreferrer">https://vim.fandom.com/wiki/Tutorial</a></td></tr></tbody></table><p>This will open a text editor, and let you edit all the commits that your branch has. It will look something like this:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pick eb8ab51 Made footer&#39;s HTML translatable</span></span>
<span class="line"><span>pick a18d382 Fixed some typos</span></span>
<span class="line"><span>pick 76b9883 Made footer&#39;s HTML translatable: added the missing translatable strings</span></span>
<span class="line"><span>pick 73c78b7 Fix git hash version i18n</span></span>
<span class="line"><span>pick 377e121 Added a missing translatable string</span></span>
<span class="line"><span>pick caf9507 Reverted unrelated changes to the PR</span></span>
<span class="line"><span>pick 23961be Clean up trailing whitespace</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Rebase ef7d551..23961be onto ef7d551 (7 commands)</span></span>
<span class="line"><span>#</span></span>
<span class="line"><span># Commands:</span></span>
<span class="line"><span># p, pick = use commit</span></span>
<span class="line"><span># r, reword = use commit, but edit the commit message</span></span>
<span class="line"><span># e, edit = use commit, but stop for amending</span></span>
<span class="line"><span># s, squash = use commit, but meld into previous commit</span></span>
<span class="line"><span># f, fixup = like &quot;squash&quot;, but discard this commit&#39;s log message</span></span>
<span class="line"><span># x, exec = run command (the rest of the line) using shell</span></span>
<span class="line"><span># d, drop = remove commit</span></span>
<span class="line"><span>#</span></span>
<span class="line"><span># These lines can be re-ordered; they are executed from top to bottom.</span></span></code></pre></div><p>If you decide you want to cancel the rebase, delete everything, and then save. That tells <code>git</code> to do nothing.</p><p>To continue with the rebase, save the file. <code>git</code> will then replay all the instructions/commits in that file. If there is a conflict, it will pause to let you fix them. See <a href="#manual-merge-conflict-resolution">Manual Merge Conflict Resolution</a>.</p><h2 id="pre-commit-and-the-github-ci" tabindex="-1">Pre-commit and the GitHub CI <a class="header-anchor" href="#pre-commit-and-the-github-ci" aria-label="Permalink to &quot;Pre-commit and the GitHub CI&quot;">​</a></h2><p>To automatically ensure that certain formatting practices are maintained throughout the codebase, and that any incoming pull requests pass a set of requisite JavaScript and Python checks, Open Library uses GitHub&#39;s Continuous Integration (CI) Server with a set of <a href="https://pre-commit.com/" target="_blank" rel="noreferrer"><code>pre-commit</code> hooks</a> to run a series of automated checks on incoming PRs.</p><h3 id="the-github-ci-server" tabindex="-1">The GitHub CI Server <a class="header-anchor" href="#the-github-ci-server" aria-label="Permalink to &quot;The GitHub CI Server&quot;">​</a></h3><p>If you don&#39;t have <code>pre-commit</code> installed locally and your PR fails any one of the checks, there are two things that may happen when you push your changes:</p><ol><li>One of the checks initially fails, but then the <code>pre-commit</code> bot pushes a new commit for you that fixes the problem. If this is the case, you&#39;ll see a commit that looks like this:</li></ol><img width="782" alt="Pre-commit bot updates" src="https://github.com/internetarchive/openlibrary/assets/140550988/444c8708-e598-4562-babb-58ae2c49d2d2"><p>This means that the <code>pre-commit</code> bot auto-fixed the problem for you, which is very common in the case of simple formatting errors. In this case, you&#39;re all set, but if you plan on making any more changes to your branch, it&#39;s a good idea to pull in <code>pre-commit</code>&#39;s changes with <code>git pull origin HEAD</code> to ensure you don&#39;t run into any conflicts.</p><ol start="2"><li>The check simply fails and you&#39;ll see something that looks like this:</li></ol><img width="757" alt="Failing pre-commit check" src="https://github.com/internetarchive/openlibrary/assets/140550988/882f228a-a7dd-4385-81a6-a70895afe7b8"><p>This means that the problem that the CI identified requires human intervention, which means you&#39;ll want to click &quot;Details&quot; to see what exactly tripped up the test, try to fix the problem locally, and push up a new solution with <code>git push origin HEAD</code>. If you&#39;re not sure what is causing the error or how to fix it, this is a great time to reach out to the issue&#39;s lead for guidance on how to proceed.</p><h3 id="running-pre-commit-locally-recommended" tabindex="-1">Running <code>pre-commit</code> Locally (Recommended) <a class="header-anchor" href="#running-pre-commit-locally-recommended" aria-label="Permalink to &quot;Running `pre-commit` Locally (Recommended)&quot;">​</a></h3><p>To test everything the CI server checks (JavaScript, <code>mypy</code>, <code>black</code>, <code>ruff</code>, etc.), and to do so automatically at the time of commit, one can run, in the local environment, outside of Docker, a Python program named <code>pre-commit</code>. This will use <code>git</code>&#39;s <a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks" target="_blank" rel="noreferrer">hooks</a> to run Open Library-specific linting checks when committing code in <code>git</code>. Because <code>pre-commit</code> integrates with <code>git</code>, that means it runs outside of Docker, and needs to be available to <code>git</code> in your current environment.</p><p>If you have <code>pre-commit</code> installed, the checks will run locally each time you add a commit to your branch. This way, you don&#39;t have to worry about re-pushing your changes every time you encounter a <code>pre-commit</code> error, which is especially nice in the case of simple formatting issues like trailing whitespace.</p><p>If your commit fails any of the checks, there are two things that may happen:</p><ol><li>The check will initially fail and your staged changes will not be committed, but <code>pre-commit</code> will auto-add a new change that fixes the problem, in which case you&#39;ll see a new unstaged git change and something like this:</li></ol><img width="564" alt="pre-commit modifying files" src="https://github.com/internetarchive/openlibrary/assets/140550988/e0f3a63d-bd66-4057-a640-a8d751407d15"><p>All you need to do in this case is add the change to staging and commit again. The check should pass, and you should now be able to push your changes.</p><ol start="2"><li>The check will simply fail, your staged changes will not be committed, and you&#39;ll see an error message like this: <img width="561" alt="Failed mypy example" src="https://github.com/internetarchive/openlibrary/assets/140550988/bb5a6118-6e51-4710-9d6d-c1a542410b5e"></li></ol><p>This means that the problem requires human intervention, which means that you can fix the problem locally, using the error message info and/or guidance from the issue&#39;s lead, and then re-commit and push your changes as needed.</p><h4 id="installing-pre-commit" tabindex="-1">Installing <code>pre-commit</code> <a class="header-anchor" href="#installing-pre-commit" aria-label="Permalink to &quot;Installing `pre-commit`&quot;">​</a></h4><p>Prerequisites:</p><ul><li>the version of your current Python interpreter must match the version of Python specified in the <code>default_language_version</code> section of <a href="https://github.com/internetarchive/openlibrary/blob/master/.pre-commit-config.yaml" target="_blank" rel="noreferrer"><code>.pre-commit-config.yaml</code></a>.</li></ul><p>Although a complete discussion of managing Python&#39;s versions and Python&#39;s virtual environments is outside the scope of this discussion, it is likely worth creating a virtual environment for each Python project on which you work. See Python&#39;s own documentation about <a href="https://docs.python.org/3/library/venv.html" target="_blank" rel="noreferrer"><code>venv</code></a> for one such approach to managing virtual environments. Additionally, if your <code>python3 --version</code> doesn&#39;t match the version specified in <code>.pre-commit-config.yaml</code>, consider <a href="https://github.com/pyenv/pyenv" target="_blank" rel="noreferrer"><code>pyenv</code></a> on Linux, macOS, or Windows Subsystem for Linux, or <a href="https://github.com/pyenv-win/pyenv-win" target="_blank" rel="noreferrer"><code>pyenv-win</code></a> on Windows outside of the Windows Subsystem for Linux.</p><p><em>Note:</em> this will install a <code>git</code> commit hook that will run prior to every commit. As there are times where one may simply wish to commit code, even if it will fail the linting, <strong>one can override commit hooks with <code>git commit --no-verify</code></strong>. For more on <code>pre-commit</code>, see <a href="https://pre-commit.com/" target="_blank" rel="noreferrer">https://pre-commit.com/</a>.</p><p>To enable <code>pre-commit</code>, run the following in your local shell outside of Docker:</p><ol><li><code>pip install pre-commit</code> or <code>brew install pre-commit</code>; and</li><li><code>pre-commit install</code></li></ol><p>Henceforth, <code>pre-commit</code> will lint your code with every <code>git commit</code> (unless you commit with <code>git commit --no-verify</code> to disable running the hooks). To manually run <code>pre-commit</code>, you can execute <code>pre-commit run --all-files</code>.</p><p>If you see an error similar to either of the following, please ensure you the version of you Python interpreter matches the version specified in <code>.pre-commit-config.yaml</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>An unexpected error has occurred: CalledProcessError: command: (&#39;/home/scott/.pyenv/versions/3.9/bin/python3.9&#39;, &#39;-mvirtualenv&#39;, &#39;/home/scott/.cache/pre-commit/repolh5wc3hy/py_env-python3.11&#39;, &#39;-p&#39;, &#39;python3.11&#39;)</span></span>
<span class="line"><span>return code: 1</span></span>
<span class="line"><span>stdout:</span></span>
<span class="line"><span>    RuntimeError: failed to find interpreter for Builtin discover of python_spec=&#39;python3.11&#39;</span></span>
<span class="line"><span>stderr: (none)</span></span>
<span class="line"><span>Check the log at /home/scott/.cache/pre-commit/pre-commit.log</span></span></code></pre></div><p>To remove <code>pre-commit</code>, run <code>pre-commit uninstall</code>.</p><h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to &quot;References&quot;">​</a></h2><ul><li>Getting Started flow roughly based on <a href="https://gist.github.com/Chaser324/ce0505fbed06b947d962" target="_blank" rel="noreferrer">https://gist.github.com/Chaser324/ce0505fbed06b947d962</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/openlibrary-docs/2_Developers/CONTRIBUTING.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>CONTRIBUTING</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/openlibrary-docs/2_Developers/misc/Docker.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Docker</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"1_everyone_community-call.md\":\"D81Nk5I_\",\"1_everyone_google-summer-of-code.md\":\"D_s3pbzh\",\"1_everyone_hacktoberfest.md\":\"Cln9x4d0\",\"1_everyone_home.md\":\"70tW4Plp\",\"1_everyone_index.md\":\"CSkKJta7\",\"1_everyone_internationalization.md\":\"C5n0068W\",\"1_everyone_open-library-community-call-minutes.md\":\"Dg7FQiyU\",\"1_everyone_slack-channels.md\":\"h9YYY48T\",\"2_developers_2_frontend_frontend-guide.md\":\"B85A2hpm\",\"2_developers_2_frontend_using-vue.md\":\"BP91373s\",\"2_developers_3_backend_endpoints.md\":\"CVf7TIZK\",\"2_developers_3_backend_general.md\":\"DTkBxo73\",\"2_developers_3_backend_understanding-the-data-model.md\":\"Ce-e8PfW\",\"2_developers_3_backend_writing-bots.md\":\"BDyROxCt\",\"2_developers_contributing.md\":\"Y03TLhsJ\",\"2_developers_git-cheat-sheet.md\":\"cexXtKHd\",\"2_developers_index.md\":\"Cz7jp28V\",\"2_developers_misc_docker.md\":\"CBL1pL5i\",\"2_developers_misc_loading-production-book-data.md\":\"4iz-Oji5\",\"2_developers_misc_outdated-getting-started.md\":\"gr54fr3i\",\"2_developers_misc_searching-data-dumps-with-grep-and-jq.md\":\"4yzLUW3G\",\"2_developers_misc_testing.md\":\"ZBo9ZE3c\",\"3_designers_design-pattern-library.md\":\"DzUXOKXt\",\"4_librarians_creating-community-lists.md\":\"Du55-b0b\",\"4_librarians_guide-to-identifiers.md\":\"CEjbXawF\",\"4_librarians_library-metadata-standards.md\":\"DtP9GBXC\",\"4_librarians_mangled-marc.md\":\"B_l9qSPJ\",\"5_projects_canonical-books-page.md\":\"D_-Lm6_A\",\"5_projects_developing-the-reading-log.md\":\"BgchTE6D\",\"5_projects_documentation.md\":\"CFBj7BM3\",\"5_projects_lead_-community-coordinator.md\":\"CTW5nrbZ\",\"5_projects_lead_-community-librarian.md\":\"dh9dfDRK\",\"5_projects_library-community-congress-2019.md\":\"CufnlLxu\",\"5_projects_orphaned-editions-planning.md\":\"Cfm08vq5\",\"5_projects_wikidata-integration.md\":\"DH3JXJzv\",\"6_advanced_anti-spam-tools.md\":\"D_s4iGNL\",\"6_advanced_archive.org-↔-open-library-synchronisation.md\":\"DC87lA0c\",\"6_advanced_component-library.md\":\"fR6Kg19S\",\"6_advanced_creating-and-logging-in-as-a-new-user-on-your-local-client.md\":\"B5Pm44If\",\"6_advanced_debugging-and-performance-profiling.md\":\"C0SX8Kqc\",\"6_advanced_deployment-guide.md\":\"DQGoFKCh\",\"6_advanced_deployment-scratchpad.md\":\"DXoq1M6k\",\"6_advanced_developer's-guide-to-data-importing.md\":\"D3BMOMcb\",\"6_advanced_disaster-history-log.md\":\"FYevO4me\",\"6_advanced_disaster-recovery-_-immediate-response.md\":\"S-sAKNLe\",\"6_advanced_feature-flagging.md\":\"DDigcikr\",\"6_advanced_generating-data-dumps.md\":\"CODiqCch\",\"6_advanced_howto_-open-library-project-management.md\":\"DJcYZTP9\",\"6_advanced_index.md\":\"0KanYzdR\",\"6_advanced_monitoring.md\":\"WTeB0bQr\",\"6_advanced_podman-(docker-alternative).md\":\"DgBGlgcB\",\"6_advanced_processing-onix-feeds.md\":\"7CvTYYhP\",\"6_advanced_production-service-architecture.md\":\"DLVUXDVm\",\"6_advanced_production-service-architecture_old.md\":\"XMH9Orss\",\"6_advanced_provisioning-guide.md\":\"CQLBhswa\",\"6_advanced_sitemap-generation.md\":\"DYWbSn9F\",\"6_advanced_solr.md\":\"BBRIcpPj\",\"6_advanced_using-cache.md\":\"C4sQuPqT\",\"6_advanced_using-the-api-with-csharp.md\":\"DN0VI78R\",\"coding-recipes.md\":\"vXwh4xU_\",\"developer's-starter-guide.md\":\"CVPppFf0\",\"fellowships.md\":\"pggalBzS\",\"history.md\":\"0li5B7fk\",\"index.md\":\"LWpd28u4\",\"kubernetes.md\":\"Dtn1BxJt\",\"the-lifecycle-of-a-network-request.md\":\"Dc66gyLL\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Open Library Docs\",\"description\":\"A new docs experience for Open Library\",\"base\":\"/openlibrary-docs/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"}],\"search\":{\"provider\":\"local\"},\"sidebar\":[{\"text\":\"1_Everyone\",\"link\":\"/1_Everyone/index.md\",\"items\":[{\"text\":\"Community-Call\",\"link\":\"/1_Everyone/Community-Call\"},{\"text\":\"Google-Summer-of-Code\",\"link\":\"/1_Everyone/Google-Summer-of-Code\"},{\"text\":\"Hacktoberfest\",\"link\":\"/1_Everyone/Hacktoberfest\"},{\"text\":\"Home\",\"link\":\"/1_Everyone/Home\"},{\"text\":\"Internationalization\",\"link\":\"/1_Everyone/Internationalization\"},{\"text\":\"Open-Library-Community-Call-Minutes\",\"link\":\"/1_Everyone/Open-Library-Community-Call-Minutes\"},{\"text\":\"Slack-Channels\",\"link\":\"/1_Everyone/Slack-Channels\"}],\"collapsed\":true},{\"text\":\"2_Developers\",\"link\":\"/2_Developers/index.md\",\"items\":[{\"text\":\"2_Frontend\",\"items\":[{\"text\":\"Frontend-Guide\",\"link\":\"/2_Developers/2_Frontend/Frontend-Guide\"},{\"text\":\"Using-Vue\",\"link\":\"/2_Developers/2_Frontend/Using-Vue\"}],\"collapsed\":true},{\"text\":\"3_Backend\",\"items\":[{\"text\":\"Endpoints\",\"link\":\"/2_Developers/3_Backend/Endpoints\"},{\"text\":\"General\",\"link\":\"/2_Developers/3_Backend/General\"},{\"text\":\"Understanding-The-Data-Model\",\"link\":\"/2_Developers/3_Backend/Understanding-The-Data-Model\"},{\"text\":\"Writing-Bots\",\"link\":\"/2_Developers/3_Backend/Writing-Bots\"}],\"collapsed\":true},{\"text\":\"CONTRIBUTING\",\"link\":\"/2_Developers/CONTRIBUTING\"},{\"text\":\"Git-Cheat-Sheet\",\"link\":\"/2_Developers/Git-Cheat-Sheet\"},{\"text\":\"misc\",\"items\":[{\"text\":\"Docker\",\"link\":\"/2_Developers/misc/Docker\"},{\"text\":\"Loading-Production-Book-Data\",\"link\":\"/2_Developers/misc/Loading-Production-Book-Data\"},{\"text\":\"OUTDATED-Getting-Started\",\"link\":\"/2_Developers/misc/OUTDATED-Getting-Started\"},{\"text\":\"Searching-data-dumps-with-grep-and-jq\",\"link\":\"/2_Developers/misc/Searching-data-dumps-with-grep-and-jq\"},{\"text\":\"Testing\",\"link\":\"/2_Developers/misc/Testing\"}],\"collapsed\":true}],\"collapsed\":true},{\"text\":\"3_Designers\",\"items\":[{\"text\":\"Design-Pattern-Library\",\"link\":\"/3_Designers/Design-Pattern-Library\"}],\"collapsed\":true},{\"text\":\"4_Librarians\",\"items\":[{\"text\":\"Creating-Community-Lists\",\"link\":\"/4_Librarians/Creating-Community-Lists\"},{\"text\":\"Guide-to-Identifiers\",\"link\":\"/4_Librarians/Guide-to-Identifiers\"},{\"text\":\"Library-Metadata-Standards\",\"link\":\"/4_Librarians/Library-Metadata-Standards\"},{\"text\":\"Mangled-MARC\",\"link\":\"/4_Librarians/Mangled-MARC\"}],\"collapsed\":true},{\"text\":\"5_Projects\",\"items\":[{\"text\":\"Canonical-Books-Page\",\"link\":\"/5_Projects/Canonical-Books-Page\"},{\"text\":\"Developing-the-Reading-Log\",\"link\":\"/5_Projects/Developing-the-Reading-Log\"},{\"text\":\"Documentation\",\"link\":\"/5_Projects/Documentation\"},{\"text\":\"Lead:-Community-Coordinator\",\"link\":\"/5_Projects/Lead:-Community-Coordinator\"},{\"text\":\"Lead:-Community-Librarian\",\"link\":\"/5_Projects/Lead:-Community-Librarian\"},{\"text\":\"Library-Community-Congress-2019\",\"link\":\"/5_Projects/Library-Community-Congress-2019\"},{\"text\":\"Orphaned-Editions-Planning\",\"link\":\"/5_Projects/Orphaned-Editions-Planning\"},{\"text\":\"Wikidata-Integration\",\"link\":\"/5_Projects/Wikidata-Integration\"}],\"collapsed\":true},{\"text\":\"6_Advanced\",\"link\":\"/6_Advanced/index.md\",\"items\":[{\"text\":\"Anti-Spam-Tools\",\"link\":\"/6_Advanced/Anti-Spam-Tools\"},{\"text\":\"Component-Library\",\"link\":\"/6_Advanced/Component-Library\"},{\"text\":\"Creating-and-Logging-in-as-a-new-user-on-your-local-client\",\"link\":\"/6_Advanced/Creating-and-Logging-in-as-a-new-user-on-your-local-client\"},{\"text\":\"Debugging-and-Performance-Profiling\",\"link\":\"/6_Advanced/Debugging-and-Performance-Profiling\"},{\"text\":\"Deployment-Guide\",\"link\":\"/6_Advanced/Deployment-Guide\"},{\"text\":\"Deployment-Scratchpad\",\"link\":\"/6_Advanced/Deployment-Scratchpad\"},{\"text\":\"Developer's-Guide-to-Data-Importing\",\"link\":\"/6_Advanced/Developer's-Guide-to-Data-Importing\"},{\"text\":\"Disaster-History-Log\",\"link\":\"/6_Advanced/Disaster-History-Log\"},{\"text\":\"Disaster-Recovery-&-Immediate-Response\",\"link\":\"/6_Advanced/Disaster-Recovery-&-Immediate-Response\"},{\"text\":\"Feature-Flagging\",\"link\":\"/6_Advanced/Feature-Flagging\"},{\"text\":\"Generating-Data-Dumps\",\"link\":\"/6_Advanced/Generating-Data-Dumps\"},{\"text\":\"HOWTO:-Open-Library-Project-Management\",\"link\":\"/6_Advanced/HOWTO:-Open-Library-Project-Management\"},{\"text\":\"Monitoring\",\"link\":\"/6_Advanced/Monitoring\"},{\"text\":\"Podman-(docker-alternative)\",\"link\":\"/6_Advanced/Podman-(docker-alternative)\"},{\"text\":\"Processing-ONIX-Feeds\",\"link\":\"/6_Advanced/Processing-ONIX-Feeds\"},{\"text\":\"Production-Service-Architecture\",\"link\":\"/6_Advanced/Production-Service-Architecture\"},{\"text\":\"Production-Service-Architecture_old\",\"link\":\"/6_Advanced/Production-Service-Architecture_old\"},{\"text\":\"Provisioning-Guide\",\"link\":\"/6_Advanced/Provisioning-Guide\"},{\"text\":\"Sitemap-Generation\",\"link\":\"/6_Advanced/Sitemap-Generation\"},{\"text\":\"Solr\",\"link\":\"/6_Advanced/Solr\"},{\"text\":\"Using-Cache\",\"link\":\"/6_Advanced/Using-Cache\"},{\"text\":\"Using-the-API-with-Csharp\",\"link\":\"/6_Advanced/Using-the-API-with-Csharp\"},{\"text\":\"archive.org-↔-Open-Library-synchronisation\",\"link\":\"/6_Advanced/archive.org-↔-Open-Library-synchronisation\"}],\"collapsed\":true},{\"text\":\"Coding-Recipes\",\"link\":\"/Coding-Recipes\"},{\"text\":\"Developer's-Starter-Guide\",\"link\":\"/Developer's-Starter-Guide\"},{\"text\":\"Fellowships\",\"link\":\"/Fellowships\"},{\"text\":\"History\",\"link\":\"/History\"},{\"text\":\"Kubernetes\",\"link\":\"/Kubernetes\"},{\"text\":\"The-Lifecycle-of-a-Network-Request\",\"link\":\"/The-Lifecycle-of-a-Network-Request\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/internetarchive/openlibrary\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>