import{_ as a,c as e,o as i,ag as n}from"./chunks/framework.BRQrZDXk.js";const d=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"2_Developers/misc/Loading-Production-Book-Data.md","filePath":"2_Developers/misc/Loading-Production-Book-Data.md"}'),o={name:"2_Developers/misc/Loading-Production-Book-Data.md"};function t(r,s,p,l,h,c){return i(),e("div",null,s[0]||(s[0]=[n(`<h2 id="loading-production-data-into-local-developer-environment" tabindex="-1">Loading Production Data into Local Developer Environment <a class="header-anchor" href="#loading-production-data-into-local-developer-environment" aria-label="Permalink to &quot;Loading Production Data into Local Developer Environment&quot;">​</a></h2><p>The local developer environment comes with a small pre-loaded data set. Some developer tasks require importing more or specific records from production into their local environment. The bash script instructions below achieve this import. Before this is listed, please see the note regarding Docker Compose versions.</p><h3 id="a-note-on-docker-compose-and-docker-compose" tabindex="-1">A note on <code>docker-compose</code> and <code>docker compose</code> <a class="header-anchor" href="#a-note-on-docker-compose-and-docker-compose" aria-label="Permalink to &quot;A note on \`docker-compose\` and \`docker compose\`&quot;">​</a></h3><p>As of early 2023, following the installation instructions on Docker&#39;s website will install either Docker Desktop, which includes Docker Compose v2, or <code>docker-ce</code> and <code>docker-compose-plugin</code> (Linux only), both of which obviate the need to install <code>docker-compose</code> v1 separately.</p><p>Further, Compose V1 will <a href="https://docs.docker.com/compose/compose-v2/" target="_blank" rel="noreferrer">no longer be supported by the end of June 2023</a> and will be removed from Docker Desktop. These directions are written for Compose V2, hence the use of <code>docker compose</code> rather than <code>docker-compose</code>. <code>docker compose</code> is <a href="https://docs.docker.com/compose/compose-v2/#differences-between-compose-v1-and-compose-v2" target="_blank" rel="noreferrer">meant to be a drop-in replacement</a> for <code>docker-compose</code>.</p><p>To see an updated document, please review <a href="https://github.com/internetarchive/openlibrary/blob/master/docker/README.md" target="_blank" rel="noreferrer">Docker Instructions</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PYTHONPATH=.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> web</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Connect to the docker image</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Copy an author (JUST the author; no works)	</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./scripts/copydocs.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /authors/OL1385865A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs:	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    fetching [&#39;/authors/OL1385865A&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    saving [&#39;/authors/OL1385865A&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    [{&#39;key&#39;: &#39;/authors/OL1385865A&#39;, &#39;revision&#39;: 1}]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Copy a work and all its editions/authors	</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./scripts/copydocs.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /works/OL14906539W</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs:	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    fetching [&#39;/works/OL14906539W&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    found references [&#39;/authors/OL30714A&#39;, &#39;/authors/OL68291A&#39;, &#39;/authors/OL1385865A&#39;, &#39;/authors/OL1058879A&#39;, &#39;/authors/OL238025A&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    fetching [&#39;/authors/OL30714A&#39;, &#39;/authors/OL68291A&#39;, &#39;/authors/OL1385865A&#39;, &#39;/authors/OL1058879A&#39;, &#39;/authors/OL238025A&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    saving [&#39;/authors/OL30714A&#39;, &#39;/authors/OL1058879A&#39;, &#39;/authors/OL238025A&#39;, &#39;/authors/OL68291A&#39;, &#39;/authors/OL1385865A&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    [{&#39;key&#39;: &#39;/authors/OL30714A&#39;, &#39;revision&#39;: 1}, {&#39;key&#39;: &#39;/authors/OL1058879A&#39;, &#39;revision&#39;: 1}, {&#39;key&#39;: &#39;/authors/OL238025A&#39;, &#39;revision&#39;: 1}, {&#39;key&#39;: &#39;/authors/OL68291A&#39;, &#39;revision&#39;: 1}]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    saving [&#39;/works/OL14906539W&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    [{&#39;key&#39;: &#39;/works/OL14906539W&#39;, &#39;revision&#39;: 1}]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Copy an edition and its works/authors	</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./scripts/copydocs.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /books/OL24966433M</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs:	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    fetching [&#39;/books/OL24966433M&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    found references [&#39;/works/OL14906539W&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    fetching [&#39;/works/OL14906539W&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    found references [&#39;/authors/OL30714A&#39;, &#39;/authors/OL68291A&#39;, &#39;/authors/OL1385865A&#39;, &#39;/authors/OL1058879A&#39;, &#39;/authors/OL238025A&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    fetching [&#39;/authors/OL30714A&#39;, &#39;/authors/OL68291A&#39;, &#39;/authors/OL1385865A&#39;, &#39;/authors/OL1058879A&#39;, &#39;/authors/OL238025A&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    saving [&#39;/authors/OL30714A&#39;, &#39;/authors/OL1058879A&#39;, &#39;/authors/OL238025A&#39;, &#39;/authors/OL68291A&#39;, &#39;/authors/OL1385865A&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    []	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    saving [&#39;/works/OL14906539W&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    []	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    saving [&#39;/books/OL24966433M&#39;]	</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    [{&#39;key&#39;: &#39;/books/OL24966433M&#39;, &#39;revision&#39;: 1}]</span></span></code></pre></div><p>Copydocs also supports queries:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>./scripts/copydocs.py --search &#39;author_key:OL18053A&#39; --search-limit 100</span></span></code></pre></div><p>Covers don&#39;t quite work correctly on the local environment. To test something with covers, change <code>coverstore_url</code> inside <code>conf/openlibrary.yml</code> to point to the production covers (covers.openlibrary.org). Avoid uploading when this is set.</p>`,10)]))}const A=a(o,[["render",t]]);export{d as __pageData,A as default};
