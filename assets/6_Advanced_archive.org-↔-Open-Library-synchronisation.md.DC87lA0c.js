import{_ as i,c as r,o,ag as t}from"./chunks/framework.BRQrZDXk.js";const b=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"6_Advanced/archive.org-↔-Open-Library-synchronisation.md","filePath":"6_Advanced/archive.org-↔-Open-Library-synchronisation.md"}'),a={name:"6_Advanced/archive.org-↔-Open-Library-synchronisation.md"};function n(l,e,s,d,c,h){return o(),r("div",null,e[0]||(e[0]=[t('<p>In order for Open Library users to access readable and borrowable books from archive.org, the respective data records need to be correctly synchronised.</p><p>This page documents the specific and technical requirements, and lists potential challenges to keeping the records synchronised.</p><h2 id="significance" tabindex="-1">Significance <a class="header-anchor" href="#significance" aria-label="Permalink to &quot;Significance&quot;">​</a></h2><p>At of 2019-06-24, 60,000 books were in our <code>inlibrary</code> lending program but not available through OpenLibrary.org. That is about 6% of our entire catalog is not borrowable through Open Library. There are another <a href="https://archive.org/search.php?query=collection%3Aprintdisabled%20AND%20-openlibrary_edition%3A%2A%20AND%20-openlibrary%3A%2A%20AND%20isbn%3A%2A%20AND%20format%3AMARC%20AND%20%21collection%3Ainlibrary" target="_blank" rel="noreferrer">281k books</a> (excluding <code>inlibrary</code>) in <code>printdisabled</code> which have isbns and MARCs and are not on Openlibrary.org. Without linking up archive.org and open Library we also lose out on the ability to reliably determine the availability of our works. We have chosen now as the time to work on this project because over the past months we have eliminated hundreds of thousands of orphaned additions which was a prerequisite to this project. Successful IA ↔ OL sync also means a revitalized import process which is more effective at importing internet archive works moving forward.</p><h2 id="existing-fields" tabindex="-1">Existing fields <a class="header-anchor" href="#existing-fields" aria-label="Permalink to &quot;Existing fields&quot;">​</a></h2><h3 id="archive-org-items" tabindex="-1">archive.org items <a class="header-anchor" href="#archive-org-items" aria-label="Permalink to &quot;archive.org items&quot;">​</a></h3><ul><li><code>openlibrary_edition</code>, format example: <code>OL12345M</code>, creates a link from the item&#39;s details page to the exact Open Library edition represented by this scan.</li><li><code>openlibrary_work</code>, format example: <code>OL12345W</code>, creates a link from the item&#39;s details page to the Open Library work that groups other editions of this scan.</li><li><code>openlibrary</code>, format example: <code>OL5189756M</code>, a now <strong>DEPRECATED</strong> reference to an Open Library edition. Potentially used in the archive.org scanning process to locate MARC records, and in Open Library import code as a short cut for matching existing records. Both uses need to be investigated and updated to use the newer fields above.</li></ul><h3 id="open-library-edition-level-metadata" tabindex="-1">Open Library Edition level metadata <a class="header-anchor" href="#open-library-edition-level-metadata" aria-label="Permalink to &quot;Open Library Edition level metadata&quot;">​</a></h3><ul><li><code>ocaid</code>, format example: <code>callofdistantmam00ward</code> This is the primary useful link back to an archive.org item. It only stores one value, so there is an issue when there exists multiple scans of an edition on archive.org. Only one is linked from OL to IA, even though multiple IA items may refer to the same edition. The current OL sync process only automatically updates the archive.org item present in this <code>ocaid</code> field.</li><li><code>source_records</code>, format example: <code>[&quot;ia:callofdistantmam00ward&quot;, ...]</code></li></ul><p>Other less common IA related fields, possibly to be deprecated?:</p><ul><li><code>&quot;ia_box_id&quot;: [&quot;IA113601&quot;]</code></li><li><code>&quot;ia_loaded_id&quot;: [&quot;callofdistantmam00ward&quot;]</code></li></ul><p><strong>Note</strong> All fake-subject references to archive.org categories that may have once been used for classifying borrowable status are now deprecated. Examples: <code>In Library</code>, <code>Protected DAISY</code>, <code>Accessible_book</code>, <code>Internet Archive Wishlist</code>, <code>Lending library</code> and possibly others. <a href="https://github.com/internetarchive/openlibrary/issues/2107" target="_blank" rel="noreferrer">Issue #2107</a> tracks this clean up.</p><p>See <a href="https://github.com/internetarchive/openlibrary-client/tree/master/olclient/schemata" target="_blank" rel="noreferrer">Open Library Client JSON schemata</a> for the currently recognised and useful metadata fields for Open Library records.</p><h2 id="technical-requirements" tabindex="-1">Technical requirements <a class="header-anchor" href="#technical-requirements" aria-label="Permalink to &quot;Technical requirements&quot;">​</a></h2><h3 id="priority-borrowable-books-should-be-synchronised-properly-to-enable-discovery-and-utilisation" tabindex="-1">PRIORITY: Borrowable books should be synchronised properly to enable discovery and utilisation <a class="header-anchor" href="#priority-borrowable-books-should-be-synchronised-properly-to-enable-discovery-and-utilisation" aria-label="Permalink to &quot;PRIORITY: Borrowable books should be synchronised properly to enable discovery and utilisation&quot;">​</a></h3><ul><li>All borrowable <code>collection:inlibrary</code> books should have <code>openlibrary_edition</code>: <ul><li>⭐ <a href="https://archive.org/search.php?query=collection%3Ainlibrary%20AND%20NOT%20openlibrary_edition%3A%2A" target="_blank" rel="noreferrer">CRITERION NOT MET</a>: <code>collection:inlibrary AND NOT openlibrary_edition:*</code></li><li>As of June 2019 there are 60K archive.org items that do not meet this condition. <ul><li><p>ex 1: has no MARC so wasn&#39;t imported: <a href="https://archive.org/details/nairobigrit" target="_blank" rel="noreferrer">https://archive.org/details/nairobigrit</a> TRY FIX: import with require_marc = False</p></li><li><p>ex 2: <a href="https://archive.org/details/buildingvirtuall0000unse" target="_blank" rel="noreferrer">https://archive.org/details/buildingvirtuall0000unse</a> has MARC, also on OL, but OL record points to non-lendable copy TRY FIX: re-import, should update ocaid. If import adds an ia source record, it should also update the ocaid!!!!</p></li><li><p>ex 3: <a href="https://archive.org/details/isbn_9781481758765" target="_blank" rel="noreferrer">https://archive.org/details/isbn_9781481758765</a> has MARC -- simply not yet imported TRY FIX: import from MARC</p></li></ul></li><li>‼️ <strong>SYNCH TASK RESULTS:</strong><ul><li>Matched: 42016 (these are the duplicate archive.org items)</li><li>Modified: 659 (these were resolved and synchronised)</li><li>bad-repub-state: 2</li><li>invalid-ia-identifier: 7</li><li>invalid-marc-record: 18</li><li>no-marc-record: 6728</li><li>item-is-serial: 4480</li><li>item-not-book: 1776</li><li>no-imagecount: 25</li><li>noindex-true: 0</li><li>not-texts-item: 0</li><li>Of the 42016 matched ids, 39776 had OLIDs written back, completing the synchronisation.</li><li>Of those, 11695 Open Library items were updated to reference the <em>lendable</em> copy of that item where previously a printdisabled only copy was linked.</li><li>This has added 11695 lendable items to OL.</li><li>Only 24 items could not be synched due to orphaned editions. (see below for more details on this category)</li><li>@ 3 July, there are now <a href="https://archive.org/search.php?query=collection%3Ainlibrary%20AND%20NOT%20openlibrary_edition%3A%2A" target="_blank" rel="noreferrer">19,823 unsynched items in this category</a> (improvement: ~40k)</li></ul></li></ul></li></ul><h3 id="priority-items-with-print-disabled-digital-copies-should-be-correctly-synchronised-to-enable-discovery-for-those-who-need-them" tabindex="-1">PRIORITY: Items with print-disabled digital copies should be correctly synchronised to enable discovery for those who need them <a class="header-anchor" href="#priority-items-with-print-disabled-digital-copies-should-be-correctly-synchronised-to-enable-discovery-for-those-who-need-them" aria-label="Permalink to &quot;PRIORITY: Items with print-disabled digital copies should be correctly synchronised to enable discovery for those who need them&quot;">​</a></h3><ul><li><p>archive.org print disabled collection items representing <em>books</em>, which are not necessarily borrowable by users without print disabilities, should have entries on Open Library to capture the existence of a book we know about, and aid discovery by print disabled users. The following query uses the presence of an ISBN as an indicator that an item is a book with sufficient metadata to count as good for importing.</p><ul><li>⭐ <a href="https://archive.org/search.php?query=collection%3Aprintdisabled%20AND%20NOT%20collection%3Ainlibrary%20AND%20NOT%20openlibrary_edition%3A%2A%20AND%20isbn%3A%2A" target="_blank" rel="noreferrer">CRITERIA NOT MET</a>: <code>collection:printdisabled AND NOT collection:inlibrary AND NOT openlibrary_edition:* AND isbn:*</code><ul><li><strong>note</strong> the number of items resulting from this query will depend on user account privileges, and not all users will see all print disabled only items by default on archive.org. @ June 2019, there are 330K items in the maximal list that are not linked to Open Library.</li><li><a href="https://github.com/internetarchive/openlibrary/issues/1047" target="_blank" rel="noreferrer">Existing issue #1047</a></li></ul></li><li><ul><li>‼️ <strong>SYNCH TASK RESULTS:</strong> @ 17 July (after running an import/re-import task for the MARC records) there are now 184,445 print-disabled only items without corresponding Open Library links (improvement: ~150K)</li></ul></li></ul></li><li><p>The following query attempts to locate items that are printdisabled only, do NOT have ISBNs in metadata, but are good scanned books <code>collection:printdisabled AND NOT collection:inlibrary AND NOT openlibrary_edition:* AND NOT isbn:* AND collection:internetarchivebooks</code> there are 13,708 results, but most appear to have incomplete titles ... strangely <em>with</em> ISBNs in the title field. It looks like these have stalled in the scanning process somehow?</p></li></ul><h3 id="deprecate-openlibrary-in-favour-of-openlibrary-edition-work" tabindex="-1">Deprecate <code>openlibrary</code> in favour of <code>openlibrary_edition</code> + <code>_work</code> <a class="header-anchor" href="#deprecate-openlibrary-in-favour-of-openlibrary-edition-work" aria-label="Permalink to &quot;Deprecate `openlibrary` in favour of `openlibrary_edition` + `_work`&quot;">​</a></h3><ul><li><p>All archive.org book items with a populated <code>openlibrary</code> metadata field should also have <code>openlibrary_edition</code>.</p><ul><li><p><a href="https://archive.org/search.php?query=mediatype%3Atexts+AND+openlibrary%3A%2A+AND+NOT+openlibrary_edition%3A%2A" target="_blank" rel="noreferrer">CRITERION NOT MET QUERY</a>: <code>mediatype:texts AND openlibrary:* AND NOT openlibrary_edition:*</code></p></li><li><p>Possible issue: just because an item has an old <code>openlibrary</code> field does not neccesarily mean it should be on OL if it doesn&#39;t meet the other criteria listed on this page.</p></li><li><p>Total @ June 2019: 25,190</p></li><li><p>Breaking this category down further into other categories listed further down:</p><ul><li><p><a href="https://archive.org/search.php?query=mediatype%3Atexts%20AND%20openlibrary%3A%2A%20AND%20NOT%20openlibrary_edition%3A%2A%20AND%20collection%3Ainlibrary" target="_blank" rel="noreferrer">In Library</a>: <code>mediatype:texts AND openlibrary:* AND NOT openlibrary_edition:* AND collection:inlibrary</code></p><ul><li>14,878 items In Library without openlibrary_edition that have openlibrary.</li><li>spot checks: <a href="https://archive.org/details/cavalierinwhite00mull_cc9" target="_blank" rel="noreferrer">https://archive.org/details/cavalierinwhite00mull_cc9</a> and <a href="https://archive.org/details/bostonaccess00wurm_0" target="_blank" rel="noreferrer">https://archive.org/details/bostonaccess00wurm_0</a> -&gt; listed OL item points to a different IA scan</li></ul></li><li><p><a href="https://archive.org/search.php?query=mediatype%3Atexts%20AND%20openlibrary%3A%2A%20AND%20NOT%20openlibrary_edition%3A%2A%20AND%20NOT%20collection%3Aprintdisabled%20AND%20NOT%20collection%3Ainlibrary" target="_blank" rel="noreferrer">Open collection</a>: <code>mediatype:texts AND openlibrary:* AND NOT openlibrary_edition:* AND NOT collection:printdisabled AND NOT collection:inlibrary</code></p><ul><li>6,801</li><li>Following an example, we have two ia scans <a href="https://archive.org/details/annalenderphysi249unkngoog" target="_blank" rel="noreferrer">https://archive.org/details/annalenderphysi249unkngoog</a> <a href="https://archive.org/details/bub_gb_xAQ4AAAAMAAJ" target="_blank" rel="noreferrer">https://archive.org/details/bub_gb_xAQ4AAAAMAAJ</a> an 1833 and an 1803 edition, which both point (using different fields) to a 1900 Open Library edition, further complicated because this item is a serial</li><li>This category needs to be filtered down -- to only include open items in known good collections Filtering these down to items in the <code>americana</code> and <code>internetarchivebooks</code> shows that most of those remaining are early serials that get excluded from the latest import criteria.</li></ul></li><li><p><a href="https://archive.org/search.php?query=mediatype%3Atexts%20AND%20openlibrary%3A%2A%20AND%20NOT%20openlibrary_edition%3A%2A%20AND%20NOT%20collection%3Ainlibrary%20AND%20collection%3Aprintdisabled%20AND%20isbn%3A%2A" target="_blank" rel="noreferrer">Printdisabled only with ISBN</a>:<code>mediatype:texts AND openlibrary:* AND NOT openlibrary_edition:* AND NOT collection:inlibrary AND collection:printdisabled AND isbn:*</code></p><ul><li>3,124</li></ul></li><li><p><a href="https://archive.org/search.php?query=mediatype%3Atexts%20AND%20openlibrary%3A%2A%20AND%20NOT%20openlibrary_edition%3A%2A%20AND%20NOT%20collection%3Ainlibrary%20AND%20collection%3Aprintdisabled%20AND%20NOT%20%20isbn%3A%2A" target="_blank" rel="noreferrer">Printdisabled only without ISBN</a>:<code>mediatype:texts AND openlibrary:* AND NOT openlibrary_edition:* AND NOT collection:inlibrary AND collection:printdisabled AND NOT isbn:*</code></p><ul><li>387 items</li><li>The collections that seem to signify these items without ISBNs are good books are <code>internetarchivebooks</code> and <code>americana</code> -- the criteria for non-lendable books below should be updated to include these pre-isbn books that are likely to have good metadata.</li></ul></li></ul></li></ul></li><li><p>All archive.org book items with <code>openlibrary_edition</code> <strong>MUST</strong> have <code>openlibrary_work</code>, and vice versa.</p><ul><li><a href="https://archive.org/search.php?query=mediatype%3Atexts%20AND%20openlibrary_edition%3A%2A%20AND%20NOT%20openlibrary_work%3A%2A" target="_blank" rel="noreferrer">CRITERION NOT MET</a>: <code>mediatype:texts AND openlibrary_edition:* AND NOT openlibrary_work:*</code></li><li><a href="https://archive.org/search.php?query=mediatype%3Atexts%20AND%20openlibrary_work%3A%2A%20AND%20NOT%20openlibrary_edition%3A%2A" target="_blank" rel="noreferrer">CRITERION NOT MET</a>: <code>mediatype:texts AND openlibrary_work:* AND NOT openlibrary_edition:*</code></li></ul></li></ul><h3 id="only-import-and-synchronise-books-ia-mediatype-texts" tabindex="-1">Only import and synchronise books (IA <code>mediatype:texts</code>) <a class="header-anchor" href="#only-import-and-synchronise-books-ia-mediatype-texts" aria-label="Permalink to &quot;Only import and synchronise books (IA `mediatype:texts`)&quot;">​</a></h3><ul><li>Openlibrary identifiers on archive.org should only be on <code>mediatype:texts</code> items as only books should be represented on Open Library. <ul><li><a href="https://archive.org/search.php?query=openlibrary%3A%2A%20OR%20openlibrary_edition%3A%2A%20OR%20openlibrary_work%3A%2A%20AND%20NOT%20mediatype%3Atexts" target="_blank" rel="noreferrer">CRITERION NOT MET</a> <code>openlibrary:* OR openlibrary_edition:* OR openlibrary_work:* AND NOT mediatype:texts</code></li><li>Some items not meeting this technical criterion may be legitimate. Some items appears to be gallery catalogs (i.e. books) that are linked to <code>mediatype:image</code>, and other archive.org items could be legitimate books that are mis-categorised. @ June 2019 there are 55 items matched above. Each item needs to be examined to find the fix, or at least to come up with a set of fix categories. Simply deleting the linking metadata would be incorrect in many of these situations as the links are probably a sign of further data issues on OL or IA.</li></ul></li></ul><h2 id="orphaned-items-with-ocaid" tabindex="-1">Orphaned items with ocaid <a class="header-anchor" href="#orphaned-items-with-ocaid" aria-label="Permalink to &quot;Orphaned items with ocaid&quot;">​</a></h2><p>This problem affects the ability of items to become synchronised using the existing mechanisms. The requirement for including both <code>work</code> id and <code>edition</code> id is affected. The solution is to resolve and add works for all editions which don&#39;t have them. This overall effort is being tracked on <a href="https://github.com/internetarchive/openlibrary/wiki/Orphaned-Editions-Planning" target="_blank" rel="noreferrer">another wiki page</a> , but the following notes relate to orphans with OCAIDs.</p><p>remaining total @ 26 June 2019: 38347</p><p>NONE are duplicated</p><h3 id="re-running-re-import-process" tabindex="-1">re-running re-import process <a class="header-anchor" href="#re-running-re-import-process" aria-label="Permalink to &quot;re-running re-import process&quot;">​</a></h3><p>20730 were successfully matched or had works created, fixing the orphan (54%)</p><p>316 were matched on a <em>different</em> existing edition. <strong>!!FIX for these:</strong> get orphan by opening <code>https://openlibrary.org/books/ia:&lt;ocaid&gt;</code> and then associate it with the matched work.</p><p>the remaining 17301 were not resolved due to the following issues:</p><ul><li>bad-repub-state: -- Need advice from Andrea or Jude. Repub state 6 is micro-film. <ul><li>5927</li></ul></li><li>invalid-ia-identifier: -- Consider wiping invalid IDs. These should get repaired if the archive.org item is reimported. This group contains many items that were removed on archive.org, now result in 404s <ul><li>209 FIXED!!</li></ul></li><li>invalid-marc-record: -- ignore for now <ul><li>43</li></ul></li><li>item-is-serial: -- investigate for quick way to match existing (if possible) otherwise, create the works. <ul><li>9766</li></ul></li><li>item-not-book: -- needs further investigation, possibly delete? <ul><li>754 ; includes scores: <a href="https://archive.org/details/xiisolosforgerma00rani" target="_blank" rel="noreferrer">https://archive.org/details/xiisolosforgerma00rani</a> pamphlets: whatbritainhasdo00slsnuoft ?? Monographic component part?: <a href="https://archive.org/details/washingtonsfirst00wornrich" target="_blank" rel="noreferrer">https://archive.org/details/washingtonsfirst00wornrich</a> Perhaps we should relax the import criteria to allow these as they are very &#39;book like&#39; in order to repair existing records, but not actively seek out to import more at the moment? If a user chose to add these, I think we&#39;d let them stand.</li></ul></li><li>no-imagecount: -- delete <ul><li>41 ; Examples: <a href="https://archive.org/details/OSIEontarioreadersfourth00miniuoft" target="_blank" rel="noreferrer">https://archive.org/details/OSIEontarioreadersfourth00miniuoft</a> <a href="https://archive.org/details/ioannisvaluerdi01hamugoog" target="_blank" rel="noreferrer">https://archive.org/details/ioannisvaluerdi01hamugoog</a></li></ul></li><li>noindex-true: -- delete <ul><li>470 Example: <a href="https://archive.org/details/miscelaneajurid00unkngoog" target="_blank" rel="noreferrer">https://archive.org/details/miscelaneajurid00unkngoog</a> <a href="https://archive.org/details/whatcountssocial00mook" target="_blank" rel="noreferrer">https://archive.org/details/whatcountssocial00mook</a> incorrect metadata example: <a href="https://archive.org/details/pamelaorvirtuer00popegoog" target="_blank" rel="noreferrer">https://archive.org/details/pamelaorvirtuer00popegoog</a></li></ul></li><li>not-texts-item: -- a BWB protodonation item to be fixed manually <ul><li>1 FIXED!</li></ul></li></ul><p><strong>Proposal:</strong> the <code>no-imagecount</code> and <code>noindex-true</code> OL orphans should simply be deleted. They tend to have been created from problematic archive.org records that we would not currently import, and the main reason for the no-index flag appears to be mismatched metadata, or otherwise bad scans. The records I have checked all seem to have better non-broken scanned items elsewhere, and have been imported properly via those.</p>',32)]))}const u=i(a,[["render",n]]);export{b as __pageData,u as default};
